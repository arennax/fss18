# Homework Week4

```
➜  src git:(master) ✗ weather | lua demo | sort -n
1	outlook	14	sunny	5
2	$temp	14	73.57	6.57
3	wind	14	FALSE	8
4	!play	14	yes	9
➜  src git:(master) ✗ auto | lua demo | sort -n
1	%cylinders	398	4	204
2	$displacement	398	193.43	104.27
3	$horsepower	392	104.47	38.49
4	<weight	398	2970.42	846.84
5	>acceltn	398	15.57	2.76
6	$model	398	76.01	3.70
7	origin	398	1	249
8	>mpg	398	23.84	8.34
➜  src git:(master) ✗ weatherLong | lua demo | sort -n
1	%outlook	28	sunny	10
2	$temp	28	73.57	6.45
3	<humid	28	81.64	10.09
4	wind	28	FALSE	16
5	!play	28	yes	18
```

## Todo

1. The usual instructions. Directory = `w4`.
2. Write a table class that reads in data from disk, and maintains one
   `num` or `sym` instance for each column.as you read in data from disk,
   update each header, incrementally.

Now check your headers are working:
3. 
4. For the file
   [autoUnsuper.csv](https://github.com/timm/lean/blob/master/data/autoUnsuper.csv):
   print the file, adding in ",>dom" on line one and ",x" on all other lines where "x"
   is the domination score (discussed below).
4. Print all the the ranges in   
   [autoUnsuper.csv](https://github.com/timm/lean/blob/master/data/autoUnsuper.csv),
   sorted by the mean dom score of the rows with those ranges.

## Background : `Dom`

Zitler's indictor-based domination score is a handy aggregation
function for multipe numeric goals. As we define it, it converts
multiple  numeric goals (that we want to minimize or maximize)
into one valie 0 to 1 where ``1'' is comparatively better 
on most
goals
while ``0'' is comparatively worse.

For example, here are some rows
of [auto.csv](https://github.com/timm/lean/blob/master/data/autoUnsuper.csv):

      %cylinders   displacement         horsepower   <weight   >acceltn   model   origin   >mpg	
      8           340:360              150:160      3609      8          70:70   1        10
      6           198:225              83:86        2587      16         70:70   1        20
      8           383:455              165:230      4425      10         70:70   1        10
      8           302:305              120:140      3449      10.5       70:70   1        20
      6           198:225              92:97        2833      15.5       70:70   1        20
      8           383:455              165:230      3850      8.5        70:70   1        20
      4           104:114              92:97        2372      15         70:70   3        20
      4           104:114              92:97        2375      17.5       70:70   2        30
      8           340:360              165:230      3693      11.5       70:70   1        20
      ....

From the first row,  we see we want to minimize weight and maximize acceleration and mpg. 
From the other rows, we see that some discretizer has gotten to the _displacement_ and _horsepower_
values are replaced them with some string describing a range e.g._lo:hi_ =  _340:360_.

Here's the same data, with `dom` score added. Shown here are the 5 best and worst rows.


    %cylinders  displacement  horsepower  <weight  >acceltn  model  origin  >mpg  >dom
    8           383:455       165:230     4746     12        71:71  1       10    0
    8           383:455       165:230     4951     11        72:73  1       10    0
    8           383:455       165:230     4952     11.5      72:73  1       10    0
    8           383:455       165:230     4955     11.5      71:71  1       10    0
    8           383:455       165:230     5140     12        71:71  1       10    0
    8           383:455       165:230     4354     9         70:70  1       10    0.01
    8           383:455       165:230     4425     10        70:70  1       10    0.01
    8           383:455       165:230     4464     11.5      71:71  1       10    0.01
    8           383:455       165:230     4735     11        72:73  1       10    0.01
    8           383:455       165:230     4906     12.5      72:73  1       10    0.01
    ..          ...           ...         ...      ..        ...    ...     ...   ...
    4           85:91         69:72       2070     18.6      78:78  3       40    0.98
    4           85:91         ?           1835     17.3      80:80  2       40    0.98
    4           68:85         46:65       1825     18.6      77:77  2       40    0.99
    4           68:85         69:72       1613     18        71:71  3       40    0.99
    4           85:91         46:65       2335     23.7      80:80  2       40    0.99
    4           85:91         46:65       1968     18.8      80:80  3       40    1.0
    4           85:91         46:65       1975     19.4      81:81  3       40    1.0
    4           85:91         46:65       1985     21.5      78:78  2       40    1.0
    4           85:91         46:65       2085     21.7      80:80  2       40    1.0
    4           96:97         46:65       2130     24.6      82:82  2       40    1.0

Observe that the _highest_ dom scores are assocaited wiht rows with least weight, most acceleration
and most mpg (and the _lowest_ dom scores are associated with the reverse).

To compute the dom score for a row, we has how many other rows does this _dominate_.
According to Zilter, X dominates Y if when we move from X to Y we loss less than when we move from Y to X.
For the definition of that domination score:

-  See `dom` in [dom.lua](http://menzies.us/lean/dom.html) for a function that returns true
   if the goals in `row1` dominate `row2`.
-  See `domws` in the same file that compares each row to `Lean.dom.samples=100` others
   to count how often this row dominates 100 others. This becomes the dom score (diided by 100
   to be a number 0..1).



The directory
[https://github.com/timm/lean/blob/master/tests/](https://github.com/timm/lean/blob/master/tests/)
contains unit tests for  in `sample.lua`, `num.lua`, `sym.lua`.
which are
(respectively)
a _reservoir sampler_ ;
a _Gaussian sampler_; and a
_entropy sampler_.


Port the unit tests to my test engine method `O.k`. Use those tests to check your Python versions of
`sample.lua`, `num.lua`, `sym.lua` in
[https://github.com/timm/lean/blob/master/src/](https://github.com/timm/lean/blob/master/src/).
the directory 
